# Консольная многопоточная программа Marker

Эта программа демонстрирует работу с потоками в Windows. 
Программа создает несколько потоков, которые маркируют элементы общего массива.

## Структура проекта
- `Lab3 C++98/` - реализация с использованием WinAPI и стандарта C++98
- `Lab3 C++11/` - реализация с использованием WinAPI и стандарта C++11

## Функциональность
1. Основной поток создает массив целых чисел и запускает несколько потоков marker.
2. Каждый поток marker пытается пометить случайные элементы массива своим ID.
3. Когда поток не может пометить элемент (элемент уже помечен), он сообщает об этом и приостанавливается.
4. Основной поток отображает состояние массива и может завершить любой из активных потоков marker.
5. Когда поток marker завершается, он очищает все элементы, которые он пометил.
6. Программа завершается, когда все потоки marker завершены.

## Различия между реализациями
- C++98: использует критические секции (CRITICAL_SECTION) для синхронизации
- C++11: использует std::mutex для синхронизации и современные конструкции C++

## Сборка и запуск

### Требования
- Windows
- CMake версии 3.11 или выше
- Компилятор с поддержкой C++98/C++11

### Сборка C++11 версии с помощью CMake
```bash
cd "Lab3 C++11"
mkdir build
cd build
cmake ..
cmake --build .
```

### Запуск C++11 версии
```bash
./Debug/Lab3_11
```

### Запуск тестов C++11 версии
```bash
./Debug/test_marker
```

### Сборка C++98 версии
Для C++98 версии используйте аналогичные команды CMake, если в проекте есть CMakeLists.txt, или скомпилируйте исходные файлы напрямую с помощью вашего компилятора.

## Детали реализации

1. **C++98 версия**:
   - Использует Windows API для работы с потоками (CreateThread, WaitForSingleObject и т.д.)
   - Использует CRITICAL_SECTION для синхронизации доступа к общим ресурсам
   - События (Event) для управления состояниями потоков

2. **C++11 версия**:
   - Аналогично использует Windows API для работы с потоками
   - Использует std::mutex и std::lock_guard для синхронизации
   - Использует более современные контейнеры (std::vector, std::unordered_set)
   - Более компактный и читабельный код благодаря возможностям C++11
